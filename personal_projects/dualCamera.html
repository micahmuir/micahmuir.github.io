<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Project Gallery â€” Camera Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Site-wide CSS (applies the cardboard texture via <html> background, tokens, navbar, etc.) -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>

<body id="projects-detail">
  <!-- Navbar -->
  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="../index.html">Home</a></li>
      <li><a href="../resume.html">Resume</a></li>
      <li><a href="../personal_projects.html">Projects</a></li>
      <li><a href="../about.html">About</a></li>
    </ul>
  </nav>

  <script>
    (function(){
      const links = document.querySelectorAll('.nav-links a');
      const currentPath = window.location.pathname;
      links.forEach(link => {
        if (link.getAttribute('href') === currentPath) link.classList.add('active');
      });
    })();
  </script>

  <div class="page">
    <!-- Cardstock intro panel (title + paragraph on one paper sheet) -->
    <section class="paper-panel">
      <h1 class="page-title">Infrared Camera Platform</h1>
      <p>
        (more information to come soon) This device is a dual-camera platform for experimenting with time of flight imagery. I used a raspberry pi 5 with both camera ports
        sporting an Arducam ToF sensor to see if it could work. Since these cameras are continuous wave modulation type, crosstalk is a major issue. I learned (after a lot of monkeying around with drivers and firmware updates)
        that if one camera is set to a higher modulation frequency, we can record simultaneous depth images without too much distortion. This is good enough for touchdesigner pixel pushing, but it's utility for mapping remains to be seen.
        
      </p>
    </section>

    <!-- Gallery -->
    <div class="gallery" id="gallery">
  

      <div class="gallery-item" data-type="video" data-src="https://www.youtube.com/embed/otG2o5SEMO0"
           data-caption="This is a particle system I'm simulating with a compute shader, and rendering with instancing. The force input to the system is provided by a live point cloud input from a generalized lidar scan,
           and used with a blob detector to track the UV positions of an arbitrary number of blobs. 2D lines are drawn when blobs are close enough, and interact as attractors and repellers to another point cloud layer. Additional 
           effects were created with TOPs in Touchdesigner.">
        <img src="https://i.ytimg.com/vi/otG2o5SEMO0/maxresdefault.jpg" alt="Companion Stairlight video">
      </div>   
      
      <div class="gallery-item" data-type="video" data-src="https://www.youtube.com/embed/8Lr2bAI5sjk"
           data-caption="A particle system interaction using a leap motion device. I instanced the joint locations to become attractors to a basic simulation.">
        <img src="https://i.ytimg.com/vi/8Lr2bAI5sjk/maxresdefault.jpg" alt="Companion Stairlight video">
      </div>



    </div>

    

     

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
      <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
      <span class="lightbox-nav lightbox-prev" onclick="prevLightbox()">&#10094;</span>
      <div class="lightbox-content" id="lightboxContent"></div>
      <span class="lightbox-nav lightbox-next" onclick="nextLightbox()">&#10095;</span>
    </div>
  </div>

  <!-- Lightbox scripts -->
  <script>
    const galleryItems = Array.from(document.querySelectorAll('.gallery-item'));
    let currentIndex = 0;

    function openLightbox(type, src, caption) {
      const contentEl = document.getElementById('lightboxContent');
      contentEl.classList.remove('show');

      setTimeout(() => {
        const html = (type === 'img')
          ? `<div style="display:flex;flex-direction:column;align-items:center;">
               <img src="${src}" alt="">
               <div class="lightbox-caption">${caption||''}</div>
             </div>`
          : `<div class="video-wrapper">
               <iframe src="${src}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
             </div>
             <div class="lightbox-caption">${caption||''}</div>`;

        contentEl.innerHTML = html;
        requestAnimationFrame(() => contentEl.classList.add('show'));
      }, 150);

      const lightbox = document.getElementById('lightbox');
      lightbox.classList.add('show');
      lightbox.style.display = 'flex';
    }

    function closeLightbox() {
      const lightbox = document.getElementById('lightbox');
      lightbox.classList.remove('show');
      setTimeout(() => {
        lightbox.style.display = 'none';
        document.getElementById('lightboxContent').innerHTML = '';
      }, 250);
    }

    function showLightbox(index) {
      const item = galleryItems[index];
      openLightbox(item.dataset.type, item.dataset.src, item.dataset.caption);
      currentIndex = index;
    }
    function nextLightbox() {
      currentIndex = (currentIndex + 1) % galleryItems.length;
      showLightbox(currentIndex);
    }
    function prevLightbox() {
      currentIndex = (currentIndex - 1 + galleryItems.length) % galleryItems.length;
      showLightbox(currentIndex);
    }

    galleryItems.forEach((item, index) => {
      item.addEventListener('click', () => showLightbox(index));
    });

    document.addEventListener('keydown', (e) => {
      const lightbox = document.getElementById('lightbox');
      if (!lightbox.classList.contains('show')) return;
      if (e.key === 'ArrowRight') nextLightbox();
      if (e.key === 'ArrowLeft')  prevLightbox();
      if (e.key === 'Escape')     closeLightbox();
    });

    // Swipe support
    let touchStartX = 0, touchEndX = 0;
    document.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, {passive:true});
    document.addEventListener('touchend',   e => { touchEndX   = e.changedTouches[0].screenX; handleSwipe(); }, {passive:true});
    function handleSwipe(){
      const lightbox = document.getElementById('lightbox');
      if (!lightbox || !lightbox.classList.contains('show')) return;
      if (touchEndX < touchStartX - 50) nextLightbox();
      if (touchEndX > touchStartX + 50) prevLightbox();
    }
  </script>

  <script src="assets/js/main.js"></script>
</body>
</html>
